<html>

<head>
  <title>Simple Map</title>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
  <!-- jsFiddle will insert css and js -->
  <style type="text/css">
    /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
    #map {
      height: 100%;
    }

    /* Optional: Makes the sample page fill the window. */
    html,
    body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
  </style>
</head>

<body>
  
  <input type="hidden" name="" value="-34.397" id="lat">
  <input type="hidden" name="" value="150.644" id="lon">

  <div id="map"></div>
  <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
 <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg&callback=initialize&libraries=&v=weekly"
      async
    ></script>
  <script type="text/javascript">
    var map;
    var geocoder;

    // window.onload = () => initialize()
    
   
    // function initialize() {
    //   geocoder = new google.maps.Geocoder();
    //   var latlng = new google.maps.LatLng(-34.397, 150.644);
    //   var mapOptions = {
    //     zoom: 8,
    //     center: location
    //   }
    //   map = new google.maps.Map(document.getElementById('map'), mapOptions);
    //   codeAddress();
    // }

    // function codeAddress() {
    //   var address = document.getElementById('address').value;
    //   geocoder.geocode({ 'address': address }, function (results, status) {
    //     if (status == 'OK') {
    //       map.setCenter(results[0].geometry.location);
    //       var marker = new google.maps.Marker({
    //         map: map,
    //         position: results[0].geometry.location
    //       });
    //     } else {
    //       alert('Geocode was not successful for the following reason: ' + status);
    //     }
    //   });
    // }
document.ready = () => initialize()
     function initialize() {
     
      var lat = parseFloat(document.getElementById('lat').value);
      var lon = parseFloat(document.getElementById('lon').value);
      console.log(lat)
      console.log(lon)
       const location = { lat: lat, lng: lon }
       map = new google.maps.Map(document.getElementById("map"), {
         center: location,
         zoom: 8,
       });

       // The marker, positioned at Location
       const marker = new google.maps.Marker({
         position: location,
         map: map,
       });
      
     }
 
  </script>
</body>

</html>